{
    "openapi": "3.0.0",
    "info": {
        "description": "DID Controller service",
        "title": "DID Controller",
        "version": ""
    },
    "servers": [
        {
            "url": "/api",
            "description": "Localhost with port 9000"
        },
        {
            "url": "http://18.139.84.180:9000/api/",
            "description": "Anh Tam's remote host"
        }
    ],
    "tags": [
        {
            "name": "DID",
            "description": "CRUD for DID"
        },
        {
            "name": "DOC",
            "description": "CRUD for document"
        }
    ],
    "paths": {
        "/did/all": {
            "get": {
                "tags": ["DID"],
                "summary": "Retrieve an array of DIDs from a company.",
                "parameters": [
                    {
                        "name": "companyName",
                        "in": "header",
                        "description": "Name of a company",
                        "required": true,
                        "example": "Kukulu",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Return an array of DID filename",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "example": ["example1.did", "example2.did"],
                                    "items": {}
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Do not exist"
                    }
                }
            }
        },
        "/did": {
            "get": {
                "tags": ["DID"],
                "summary": "Retrieve one single DID.",
                "parameters": [
                    {
                        "name": "companyName",
                        "in": "header",
                        "description": "Name of a company",
                        "required": true,
                        "example": "Kukulu",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "publicKey",
                        "in": "header",
                        "description": "Public Key of the user's wallet.",
                        "required": true,
                        "example": "public_key",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Return an DID object",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/DID_Object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Do not exist"
                    }
                }
            },
            "post": {
                "tags": ["DID"],
                "summary": "Create new DID doc for a company.",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "companyName": {
                                        "description": "Name of the company.",
                                        "type": "string",
                                        "example": "Kukulu"
                                    },
                                    "publicKey": {
                                        "description": "Public Key of the user's wallet.",
                                        "type": "string",
                                        "example": "public_key"
                                    },
                                    "content": {
                                        "description": "Content of the DID doc.",
                                        "type": "object",
                                        "example": {
                                            "controller": "123abcd",
                                            "id": "did:some_string:company:publicKey",
                                            "date": "10-10-2000"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "201": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/SuccessResponse"
                                }
                            }
                        }
                    }
                }
            },
            "put": {
                "tags": ["DID"],
                "summary": "Update existed DID of a company.",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "companyName": {
                                        "description": "Name of the company.",
                                        "type": "string",
                                        "example": "Kukulu"
                                    },
                                    "publicKey": {
                                        "description": "Public Key of the user's wallet.",
                                        "type": "string",
                                        "example": "public_key"
                                    },
                                    "content": {
                                        "description": "Content of the DID doc.",
                                        "type": "object",
                                        "example": {
                                            "date": "10-10-2000",
                                            "issuer": "123123abcd",
                                            "updated": true
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Return an DID object",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/SuccessResponse"
                                }
                            }
                        }
                    }
                }
            },
            "delete": {
                "tags": ["DID"],
                "summary": "Delete existed DID of a company.",
                "parameters": [
                    {
                        "name": "companyName",
                        "in": "header",
                        "description": "Name of a company",
                        "required": true,
                        "example": "Kukulu",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "publicKey",
                        "in": "header",
                        "description": "Public Key of the user's wallet.",
                        "required": true,
                        "example": "public_key",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/SuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/doc/exists": {
            "get": {
                "tags": ["DOC"],
                "summary": "Check if document with the given name already exists within the same company.",
                "parameters": [
                    {
                        "name": "companyName",
                        "in": "header",
                        "description": "Name of a company",
                        "required": true,
                        "example": "Kukulu",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "fileName",
                        "in": "header",
                        "description": "Name of the document (not include the file extension).",
                        "required": true,
                        "example": "document_name",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Return true/false on whether a file is existed",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "isExisted": {
                                            "description": "True if file is already existed, otherwise false.",
                                            "type": "Boolean",
                                            "example": false
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/doc": {
            "get": {
                "tags": ["DOC"],
                "summary": "Retrieve one single document from a company.",
                "parameters": [
                    {
                        "name": "companyName",
                        "in": "header",
                        "description": "Name of a company",
                        "required": true,
                        "example": "Kukulu",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "fileName",
                        "in": "header",
                        "description": "Name of the document file.",
                        "required": true,
                        "example": "file_name",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "exclude",
                        "in": "query",
                        "description": "Description for what to EXCLUDE the return value. If empty return both wrapped document and did document of the document.",
                        "enum": ["doc", "did"],
                        "example": "doc",
                        "schema": {
                            "type": "string"
                        },
                        "examples": {
                            "did": {
                                "value": "did",
                                "summary": "Exclude the did document. Return value will only contains the wrapped document."
                            },
                            "max": {
                                "value": "doc",
                                "summary": "Exclude the wrapped document. Return value will only contains the did document."
                            }
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Return a wrapped document",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/WrappedDocument"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Do not exist"
                    }
                }
            },
            "post": {
                "tags": ["DOC"],
                "summary": "Create a new document for a company.",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "wrappedDocument": {
                                        "$ref": "#/components/schemas/WrappedDocument"
                                    },
                                    "companyName": {
                                        "description": "Name of the company.",
                                        "type": "string",
                                        "example": "Kukulu"
                                    },
                                    "fileName": {
                                        "description": "Name of the file.",
                                        "type": "string",
                                        "example": "file_name"
                                    }
                                }
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "201": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/SuccessResponse"
                                }
                            }
                        }
                    }
                }
            },
            "delete": {
                "tags": ["DOC"],
                "summary": "Delete one existed document from a company.",
                "parameters": [
                    {
                        "name": "companyName",
                        "in": "header",
                        "description": "Name of a company",
                        "required": true,
                        "example": "Kukulu",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "fileName",
                        "in": "header",
                        "description": "Name of the document file.",
                        "required": true,
                        "example": "file_name",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/SuccessResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Do not exist"
                    }
                }
            }
        }
    },
    "components": {
        "schemas": {
            "DID_Object": {
                "type": "object",
                "properties": {
                    "name": {
                        "type": "string",
                        "description": "Name of the DID",
                        "example": "public_key"
                    },
                    "content": {
                        "type": "object",
                        "description": "DID document in JSON format.",
                        "example": {
                            "date": "10-10-2000"
                        }
                    }
                }
            },
            "WrappedDocument": {
                "type": "object",
                "example": {
                    "version": "https://schema.openattestation.com/2.0/schema.json",
                    "data": {
                        "name": "UUIDV4:string:...",
                        "issuers": [
                            {
                                "identityProof": {
                                    "type": "UUIDV4:string:DID",
                                    "location": "UUIDV4:string:fuixlabs.com"
                                },
                                "did": "UUIDV4:string:....",
                                "tokenRegistry": "UUIDV4:string:...",
                                "address": "addr_test1qq53em6pdpswwc7mmeq50848emp4u7gmhp2dft4ud0lhar54000k46cgk82rmlfjysyxyvh9qkj7vtuc69ulgdypcnssjk3hur"
                            }
                        ]
                    },
                    "signature": {
                        "type": "SHA3MerkleProof",
                        "targetHash": "11d456db211d68cc8a6eac5e293422dec669b54812e4975497d7099467335987",
                        "proof": [],
                        "merkleRoot": "11d456db211d68cc8a6eac5e293422dec669b54812e4975497d7099467335987"
                    }
                }
            },
            "SuccessResponse": {
                "type": "object",
                "properties": {
                    "message": {
                        "type": "string",
                        "example": "Success"
                    }
                }
            }
        }
    }
}
